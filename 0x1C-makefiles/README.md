# 0x1C. C - Makefiles
## Notes
### Learning Objectives
### General
+ What are make, Makefiles
+ When, why and how to use Makefiles
+ What are rules and how to set and use them
+ What are explicit and implicit rules
+ What are the most common / useful rules
+ What are variables and how to set and use them
### What is make?
The make utility automatically determines which pieces of a large program need to be recompiled, and issues commands to recompile them.

You need a file called a makefile to tell make what to do. Most often, the makefile tells make how to compile and link a program.The makefile can also tell make how to run miscellaneous commands when explicitly asked (for example, to remove certain files as a clean-up operation).  

### What a Rule Looks Like
A simple makefile consists of “rules” with the following shape:

```c
target … : prerequisites …
        recipe
        …
        …
```
A target is usually the name of a file that is generated by a program; examples of targets are executable or object files. A target can also be the name of an action to carry out, such as ‘clean’ (see Phony Targets).

A prerequisite is a file that is used as input to create the target. A target often depends on several files.

A recipe is an action that make carries out. A recipe may have more than one command, either on the same line or each on its own line. Please note: you need to put a tab character at the beginning of every recipe line!

Functions for String Substitution and Analysis
Here are some functions that operate on strings:

$(subst from,to,text)
Performs a textual replacement on the text text: each occurrence of from is replaced by to. The result is substituted for the function call. For example,

$(subst ee,EE,feet on the street)
produces the value ‘fEEt on the strEEt’.

$(patsubst pattern,replacement,text)
Finds whitespace-separated words in text that match pattern and replaces them with replacement. Here pattern may contain a `%` which acts as a wildcard, matching any number of any characters within a word. If replacement also contains a ‘%’, the ‘%’ is replaced by the text that matched the ‘%’ in pattern. Words that do not match the pattern are kept without change in the output. Only the first ‘%’ in the pattern and replacement is treated this way; any subsequent ‘%’ is unchanged.

`%` characters in patsubst function invocations can be quoted with preceding backslashes (‘\’). Backslashes that would otherwise quote ‘%’ characters can be quoted with more backslashes. Backslashes that quote ‘%’ characters or other backslashes are removed from the pattern before it is compared file names or has a stem substituted into it. Backslashes that are not in danger of quoting ‘%’ characters go unmolested. For example, the pattern the\%weird\\%pattern\\ has ‘the%weird\’ preceding the operative ‘%’ character, and ‘pattern\\’ following it. The final two backslashes are left alone because they cannot affect any ‘%’ character.

Whitespace between words is folded into single space characters; leading and trailing whitespace is discarded.

For example,

$(patsubst %.c,%.o,x.c.c bar.c)
## Links
+ [How to install make on Ubuntu](https://www.geeksforgeeks.org/how-to-install-make-on-ubuntu/)
+ [GNU Make official Doc](https://www.gnu.org/software/make/manual/html_node/)
